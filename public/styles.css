
:root {
  --bg: #0b1020;
  --panel: #0e1528;
  --panel-2: #0f1832;
  --text: #eaf2ff;
  --muted: #9fb0cc;
  --accent: #6aa6ff;
  --accent-2: #7cf6d3;
  --border: #1c2744;
  --success: #22c55e;
  --danger: #ef4444;
  --shadow: 0 10px 30px rgba(0,0,0,.35);
}
:root.light {
  --bg: #f6f8fc;
  --panel: #ffffff;
  --panel-2: #ffffff;
  --text: #0c1b33;
  --muted: #4a5d7a;
  --accent: #2563eb;
  --accent-2: #10b981;
  --border: #e3e8f0;
  --shadow: 0 10px 30px rgba(0,0,0,.08);
}
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0; background: radial-gradient(1200px 800px at 80% -20%, #123 0%, transparent 60%), var(--bg); color: var(--text);
  font: 15px/1.55 Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, Apple SD Gothic Neo, sans-serif;
}

/* Header */
.topbar {
  position: sticky; top: 0; z-index: 50;
  display: flex; align-items: center; gap: 12px; justify-content: space-between;
  padding: 10px 16px; background: rgba(20,26,44,.72); backdrop-filter: blur(10px) saturate(160%);
  border-bottom: 1px solid var(--border);
}
.brand { display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.2px; }
.brand .logo { width:28px; height:28px; border-radius:8px; background:linear-gradient(135deg,var(--accent),var(--accent-2)); display:grid; place-items:center; color:#012; font-weight:900; }
.controls { display:flex; align-items:center; gap:8px; }
.pill { background: rgba(106,166,255,.15); padding:6px 10px; border-radius:999px; font-size:12px; }
.icon-btn { border:1px solid var(--border); background:linear-gradient(180deg,var(--panel),var(--panel-2)); color:var(--text); padding:8px 10px; border-radius:12px; cursor:pointer; }
.icon-btn:hover { border-color: var(--accent); }

/* Layout */
.shell { display:grid; grid-template-columns: 280px 1fr; gap: 16px; max-width:1200px; margin: 16px auto; padding: 0 16px; }
@media (max-width: 900px){ .shell { grid-template-columns: 1fr; } }

.sidebar {
  background: linear-gradient(180deg,var(--panel),var(--panel-2)); border:1px solid var(--border);
  border-radius: 16px; padding: 14px; box-shadow: var(--shadow); display:grid; gap:12px; align-content:start;
}
.field { display:grid; gap:8px; }
.inputbox { background:#0f172a; color:var(--text); border:1px solid var(--border); border-radius:12px; padding:10px 12px; outline:none; }
:root.light .inputbox { background:#f8fafc; }
button.primary { background:linear-gradient(135deg,var(--accent),var(--accent-2)); color:#012; border:0; padding:12px 14px; border-radius:12px; font-weight:800; cursor:pointer; width:100%; }
button.ghost { background:transparent; border:1px solid var(--border); color:var(--text); padding:12px 14px; border-radius:12px; font-weight:700; cursor:pointer; width:100%; }

/* Chat */
.chat {
  display:grid; grid-template-rows: auto 1fr auto; height: calc(100dvh - 110px);
  background: linear-gradient(180deg,var(--panel),var(--panel-2)); border:1px solid var(--border);
  border-radius:16px; box-shadow: var(--shadow);
}
.toolbar { display:flex; align-items:center; gap:10px; padding:10px 12px; border-bottom:1px solid var(--border); color:var(--muted); font-size:13px; }
.toolbar .rtt { font-variant-numeric: tabular-nums; }
.messages { overflow-y:auto; padding: 14px; display:grid; gap:10px; }
.msg { max-width: 70%; padding: 10px 12px; border-radius: 14px; border: 1px solid var(--border); word-break: break-word; }
.msg.me { justify-self: end; background: #061e3a; }
:root.light .msg.me { background:#eff6ff; }
.msg .meta { font-size: 11px; color: var(--muted); margin-top: 6px; display:flex; gap:8px; align-items:center; }
.msg .status { font-size: 11px; }
.msg.system { justify-self: center; background: transparent; border-style: dashed; color: var(--muted); font-size: 13px; }

.separator { justify-self:center; color:var(--muted); font-size:12px; position:relative; padding:4px 10px; }
.separator::before,.separator::after{ content:""; position:absolute; top:50%; width:120px; height:1px; background:var(--border); }
.separator::before{ left:-130px; } .separator::after{ right:-130px; }
.session-end { justify-self:center; color:var(--muted); font-size:12px; border:1px dashed var(--border); padding:6px 10px; border-radius:999px; }

.input { display:grid; grid-template-columns: 1fr auto; gap:8px; padding:10px; border-top:1px solid var(--border); }
textarea { width:100%; background:#0f172a; color:var(--text); border:1px solid var(--border); border-radius:12px; padding:12px; resize:none; min-height:44px; outline:none; }
:root.light textarea { background:#f8fafc; }
.send { background:var(--accent); color:#012; border:0; padding:0 16px; border-radius:12px; font-weight:800; cursor:pointer; }

/* states */
.pending { opacity:.8; }
.dotting::after{ content:" …"; animation:dots 1.4s linear infinite; }
@keyframes dots { 0%{content:" ."} 33%{content:" .."} 66%{content:" ..."} 100%{content:" ."} }
.failed { border-color: var(--danger) !important; position:relative; }
.failed::after { content:"전송 실패"; color:var(--danger); font-size:11px; position:absolute; right:8px; bottom:-16px; }
