
:root{
  --bg:#ffffff; --text:#202124; --muted:#5f6368; --surface:#ffffff; --elev:#f1f3f4; --primary:#4285f4; --danger:#ea4335; --ok:#1aa782; --border:#e0e0e0;
}
:root.dark{
  --bg:#202124; --text:#e8eaed; --muted:#9aa0a6; --surface:#2a2b2f; --elev:#303134; --primary:#8ab4f8; --danger:#f28b82; --ok:#5ad2a8; --border:#3c4043;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0; background:var(--bg); color:var(--text); font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
.appbar{position:sticky; top:0; z-index:10; display:flex; justify-content:space-between; align-items:center; padding:10px 16px; background:var(--surface); border-bottom:1px solid var(--border)}
.brand{font-weight:700}
.tray{display:flex; align-items:center; gap:8px; position:relative}
.icon, .avatar{border:none; background:transparent; font-size:18px; cursor:pointer; padding:8px; border-radius:8px}
.icon:focus,.avatar:focus{outline:2px solid var(--primary)}
.menu{position:absolute; right:0; top:44px; width:260px; background:var(--surface); border:1px solid var(--border); border-radius:12px; box-shadow:0 8px 24px rgba(0,0,0,.2)}
.hidden{display:none}
.menu-head{display:flex; gap:10px; align-items:center; padding:12px 12px 6px}
.avatar.sm{font-size:16px; padding:4px 6px; background:var(--elev); border-radius:50%}
.menu .item{width:100%; display:flex; justify-content:space-between; align-items:center; padding:10px 12px; background:transparent; border:none; color:var(--text); cursor:pointer}
.menu .item:hover{background:var(--elev)}
.menu .value{color:var(--muted); font-size:12px}
.divider{height:1px; background:var(--border); margin:6px 0}
.topinfo{display:flex; justify-content:space-between; gap:8px; padding:8px 16px; color:var(--muted); border-bottom:1px solid var(--border)}
.viewport{position:relative; height:calc(100vh - 160px); padding:12px; overflow:auto; background:var(--bg)}
.log{list-style:none; margin:0; padding:0}
.msg{max-width:70%; margin:8px 0; padding:10px 14px; border-radius:18px; box-shadow:0 1px 2px rgba(0,0,0,.04)}
.msg.me{margin-left:auto; background:var(--primary); color:#fff}
.msg.you{margin-right:auto; background:var(--elev)}
.meta{font-size:11px; color:var(--muted); margin-bottom:4px}
.time{font-size:10px; color:var(--muted); margin-top:4px; text-align:right}
.empty{position:absolute; inset:0; display:flex; flex-direction:column; gap:12px; align-items:center; justify-content:center; text-align:center}
.primary{background:var(--primary); color:#fff; border:none; border-radius:24px; padding:10px 18px; cursor:pointer}
.primary.lg{padding:14px 22px; font-size:16px; font-weight:700}
.composer{position:fixed; left:0; right:0; bottom:0; display:flex; gap:8px; align-items:center; padding:10px 12px; background:var(--surface); border-top:1px solid var(--border)}
.composer .icon{font-size:20px}
textarea{flex:1; resize:none; min-height:44px; max-height:160px; border:none; padding:10px 12px; background:var(--elev); border-radius:20px; color:var(--text)}
.send{border:none; background:var(--primary); color:#fff; width:44px; height:44px; border-radius:50%; font-weight:700; cursor:pointer}
.fab{position:fixed; right:16px; bottom:86px; display:flex; flex-direction:column; gap:10px}
.fab-btn{width:52px; height:52px; border:none; border-radius:50%; background:var(--primary); color:#fff; font-size:18px; cursor:pointer; box-shadow:0 6px 16px rgba(0,0,0,.2)}
.fab-btn.danger{background:var(--danger)}
.toast{position:fixed; left:50%; transform:translateX(-50%); bottom:20px; background:var(--surface); color:var(--text); border:1px solid var(--border); border-radius:10px; padding:10px 14px; box-shadow:0 6px 16px rgba(0,0,0,.15); display:none}
.toast.show{display:block; animation:fade .2s ease}
.modal::backdrop{background:rgba(0,0,0,.35)}
.modal .card{background:var(--surface); color:var(--text); border:1px solid var(--border); border-radius:12px; padding:16px; min-width:320px}
.captcha{min-height:78px; display:flex; align-items:center; justify-content:center}
.row{display:flex; justify-content:flex-end; gap:8px; margin-top:12px}
.muted{color:var(--muted)}
@keyframes fade{from{opacity:.5; transform:translate(-50%,6px)} to{opacity:1; transform:translate(-50%,0)}}
@media (max-width: 760px){
  .viewport{height:calc(100vh - 150px)}
  .msg{max-width:86%}
}
