
<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>랜덤채팅 Plus - 익명 1:1</title>
    <meta name="description" content="DB 없이 가벼운 한국어 랜덤 1:1 채팅 - 캡차 & 필수기능" />
    <link rel="stylesheet" href="/style.css" />
    <link rel="preconnect" href="https://cdn.socket.io" />
    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
  </head>
  <body>
    <header class="topbar">
      <div class="brand">
        <div class="logo">💬</div>
        <h1>랜덤채팅 <span class="badge">Plus</span></h1>
      </div>
      <nav class="nav">
        <button id="btnFind" class="primary" disabled>매칭 시작</button>
        <button id="btnCancel" class="ghost" disabled>취소</button>
        <button id="btnNext" class="ghost" disabled>다음</button>
        <button id="btnEnd" class="ghost" disabled>종료</button>
        <label class="switch" title="자동 재매칭">
          <input id="auto" type="checkbox"/><span>자동 재매칭</span>
        </label>
        <button id="btnTheme" class="ghost">🌗 테마</button>
      </nav>
    </header>

    <section class="statusbar">
      <div>대기열: <strong id="qsize">0</strong>명</div>
      <div id="net">연결 상태 확인 중…</div>
    </section>

    <main class="layout">
      <section class="chat">
        <ul id="log" class="log" aria-live="polite" aria-relevant="additions"></ul>
        <div id="typing" class="typing hidden">상대가 입력 중…</div>
        <form id="form" class="composer">
          <textarea id="input" maxlength="5000" placeholder="메시지를 입력하세요 (Enter 전송, Shift+Enter 줄바꿈)"></textarea>
          <div class="row">
            <div class="left">
              <span id="count" class="muted">0 / 5000</span>
              <span id="read" class="muted"></span>
            </div>
            <div class="right">
              <button id="btnSend" type="submit" class="primary" disabled>전송</button>
            </div>
          </div>
        </form>
      </section>

      <aside class="side">
        <div class="card">
          <h2>보안 확인</h2>
          <p class="muted">매칭 시작 전에 아래 캡차를 완료해주세요.</p>
          <div id="captchaBox" class="captcha"></div>
          <div class="row"><span id="capState" class="muted">캡차 로딩 중…</span></div>
        </div>

        <div class="card">
          <h2>설정</h2>
          <label class="field">
            <span>닉네임</span>
            <input id="nick" type="text" maxlength="20" placeholder="예: 파도" />
          </label>
          <div class="row">
            <button id="btnSaveNick">저장</button>
          </div>
        </div>

        <div class="card small">
          <h2>도움말</h2>
          <p class="muted">Enter 전송 · Shift+Enter 줄바꿈 · 매칭 취소 가능</p>
        </div>
      </aside>
    </main>

    <footer class="footer"><p>© 2025 랜덤채팅 Plus</p></footer>

    <audio id="snd" preload="auto">
      <source src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABYAAAABAAgAZGF0YQAAAAA=" type="audio/wav"/>
    </audio>

    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js" crossorigin="anonymous"></script>
    <script src="/client.js"></script>
  </body>
</html>
